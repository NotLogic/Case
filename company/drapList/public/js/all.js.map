{"version":3,"sources":["script.js"],"names":["byId","id","document","getElementById","loadScripts","desc","callback","deps","key","idx","push","_next","pid","name","script","createElement","type","src","setInterval","window","clearTimeout","apply","getElementsByTagName","appendChild","console","log","alert","join","arguments","Sortable","create","group","animation","onEnd","evt","statistics","DrapList","drapListElement","$","drapListElementLen","length","setDraplist","drap","len","draplist","each","click","e","element","parent","children","toggleDrapFullMessage","append","clone","stopPropagation","UpdetaElementDrapList","prev","remove","last","obj","val","time","text","fadeIn","setTimeout","fadeOut","elMainDrapList","elHeader","elFooter","elSumList","sortingListSum","sortingCheckedSum","el","arr","is"],"mappings":"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","file":"all.js","sourcesContent":["(function () {\r\n    'use strict';\r\n\r\n    var byId = function (id) { return document.getElementById(id); },\r\n\r\n        loadScripts = function (desc, callback) {\r\n            var deps = [], key, idx = 0;\r\n\r\n            for (key in desc) {\r\n                deps.push(key);\r\n            }\r\n\r\n            (function _next() {\r\n                var pid,\r\n                    name = deps[idx],\r\n                    script = document.createElement('script');\r\n\r\n                script.type = 'text/javascript';\r\n                script.src = desc[deps[idx]];\r\n\r\n                pid = setInterval(function () {\r\n                    if (window[name]) {\r\n                        clearTimeout(pid);\r\n\r\n                        deps[idx++] = window[name];\r\n\r\n                        if (deps[idx]) {\r\n                            _next();\r\n                        } else {\r\n                            callback.apply(null, deps);\r\n                        }\r\n                    }\r\n                }, 30);\r\n\r\n                document.getElementsByTagName('head')[0].appendChild(script);\r\n            })()\r\n        },\r\n\r\n        console = window.console;\r\n\r\n\r\n    if (!console.log) {\r\n        console.log = function () {\r\n            alert([].join.apply(arguments, ' '));\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 设置可拖动排序列表\r\n     */\r\n\r\n    (function () {\r\n        Sortable.create(byId('mainDarpList'), {\r\n            group: \"mainDarpList\",\r\n            animation: 150\r\n        });\r\n\r\n        Sortable.create(byId('drapSumList'), {\r\n            group: \"words\",\r\n            animation: 150,\r\n            onEnd: function(evt){\r\n                statistics()\r\n            }\r\n        });\r\n    })()\r\n\r\n\r\n\r\n    class DrapList {\r\n        constructor () {\r\n            /**\r\n             * 初始化获取元素和长度\r\n             * @type {jQuery|HTMLElement}\r\n             */\r\n            this.drapListElement= $('.drapList')\r\n            this.drapListElementLen= this.drapListElement.length\r\n\r\n            /**\r\n             * 设置多个列表可互相拖动方法\r\n             */\r\n            this.setDraplist(this.drapListElement, this.drapListElementLen)\r\n\r\n        }\r\n\r\n        /**\r\n         * 设置拖动列表\r\n         * @param drap\r\n         * @param len\r\n         */\r\n        setDraplist(drap, len) {\r\n            while (len--){\r\n                Sortable.create(drap[len], {\r\n                    group: \"words\",\r\n                    animation: 150,\r\n                    onEnd: function(evt){\r\n                        statistics()\r\n                    }\r\n                });\r\n\r\n            }\r\n        }\r\n\r\n\r\n        /**\r\n         * 更新拖动列表元素和长度\r\n         * @constructor\r\n         */\r\n        UpdetaElementDrapList(){\r\n            this.drapListElement = $('.drapList')\r\n            this.drapListElementLen =  this.drapListElement.length\r\n            this.setDraplist(this.drapListElement, this.drapListElementLen)\r\n        }\r\n\r\n\r\n    }\r\n    let draplist = new DrapList()\r\n\r\n\r\n    /**\r\n     * 添加新行\r\n     */\r\n    $('.addDrapList').each(function () {\r\n        $(this).click(function (e) {\r\n            let element = $(this).parent().parent().parent().children()\r\n            let len = element.length\r\n            if(len >= 3){\r\n                toggleDrapFullMessage('#drapFullMessage', '最多不能超过三行！', 1000 )\r\n                return false\r\n            } else {\r\n                $(this).parent().parent().parent().append($(\"#muban .drapContainer\").clone(true))\r\n            }\r\n            e.stopPropagation()\r\n            draplist.UpdetaElementDrapList()\r\n        })\r\n    })\r\n\r\n    /**\r\n     * 删除一行\r\n     */\r\n    $('.lessDrapList').each(function () {\r\n        $(this).click(function (e) {\r\n            let element = $(this).parent().prev().children()\r\n            let len = element.length\r\n            if(len){\r\n                $(element).each(function () {\r\n                    $('#drapSumList').append($(this))\r\n                })\r\n                $(this).parent().parent().remove()\r\n                return false\r\n            }else{\r\n                $(this).parent().parent().remove()\r\n            }\r\n            e.stopPropagation()\r\n            draplist.UpdetaElementDrapList()\r\n        })\r\n    })\r\n\r\n    /**\r\n     * 统计行数\r\n     * @constructor\r\n     */\r\n    function statistics() {\r\n        $('.drapList').each(function () {\r\n            let element = $(this).children()\r\n            let len = element.length\r\n            if(len > 3 ){\r\n                toggleDrapFullMessage('#drapFullMessage', '一行最多放置三个，请添加新列或者放置下一列！', 1000 )\r\n                $('#drapSumList').append(element.last())\r\n                return false\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 显示提示新信息\r\n     * @param obj\r\n     * @param val\r\n     * @param time\r\n     */\r\n    function toggleDrapFullMessage(obj, val, time) {\r\n        $(obj).text(val).fadeIn(function () {\r\n            setTimeout(function () {\r\n                $(obj).fadeOut()\r\n            }, time)\r\n        })\r\n    }\r\n\r\n    $('#test').click(function () {\r\n        let elMainDrapList = $('#mainDarpList li input[type=checkbox]')\r\n\r\n        let elHeader = $('#header .drapContainer .drapList li a')\r\n        let elFooter = $('#footer .drapContainer .drapList li')\r\n        let elSumList = $('#drapSumList li')\r\n\r\n        console.log(\r\n            // sortingCheckedSum(elMainDrapList)\r\n            sortingListSum(elHeader)\r\n        )\r\n    })\r\n\r\n\r\n    /**\r\n     * 输出所有列表选中的值\r\n     * @param el\r\n     * @returns {Array}\r\n     */\r\n    function sortingCheckedSum(el) {\r\n        let arr = []\r\n        $(el).each(function () {\r\n            if($(this).is(':checked')){\r\n                // console.log($(this).val())\r\n                arr.push($(this).val())\r\n            }\r\n        })\r\n        return arr\r\n    }\r\n\r\n    function sortingListSum(el) {\r\n        let arr = []\r\n        $(el).each(function () {\r\n            arr.push($(this).text())\r\n        })\r\n        return arr\r\n    }\r\n\r\n})();\r\n\r\n\r\n\r\n"]}