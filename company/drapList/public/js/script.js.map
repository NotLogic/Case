{"version":3,"sources":["script.js"],"names":["byId","id","document","getElementById","loadScripts","desc","callback","deps","key","idx","push","_next","pid","name","script","createElement","type","src","setInterval","window","clearTimeout","apply","getElementsByTagName","appendChild","console","log","alert","join","arguments","sorttablesSumList","Sortable","create","group","animation","onEnd","evt","statistics","sorttableMainList","drapListElement","$","drapListElementLen","length","drapStatus","setDraplist","drap","len","sorttablelist","option","UpdetaElementDrapList","each","element","children","toggleDrapFullMessage","append","last","obj","val","time","text","fadeIn","setTimeout","fadeOut","sortingListSum","el","arr","mainDrapListInputVal","find","is","click","e","parent","stopPropagation","elHeader","elFooter","elMainInputval","on","stateMainList","stateSumList"],"mappings":"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","file":"script.js","sourcesContent":["(function () {\r\n    'use strict';\r\n\r\n    let byId = function (id) { return document.getElementById(id); },\r\n\r\n    loadScripts = function (desc, callback) {\r\n            let deps = [], key, idx = 0;\r\n\r\n            for (key in desc) {\r\n                deps.push(key);\r\n            }\r\n\r\n            (function _next() {\r\n                let pid,\r\n                    name = deps[idx],\r\n                    script = document.createElement('script');\r\n\r\n                script.type = 'text/javascript';\r\n                script.src = desc[deps[idx]];\r\n\r\n                pid = setInterval(function () {\r\n                    if (window[name]) {\r\n                        clearTimeout(pid);\r\n\r\n                        deps[idx++] = window[name];\r\n\r\n                        if (deps[idx]) {\r\n                            _next();\r\n                        } else {\r\n                            callback.apply(null, deps);\r\n                        }\r\n                    }\r\n                }, 30);\r\n\r\n                document.getElementsByTagName('head')[0].appendChild(script);\r\n            })()\r\n        },\r\n\r\n        console = window.console;\r\n\r\n        if (!console.log) {\r\n        console.log = function () {\r\n            alert([].join.apply(arguments, ' '));\r\n        };\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 设置可拖动排序列表\r\n     */\r\n\r\n    let sorttablesSumList = Sortable.create(byId('drapSumList'), {\r\n        group: \"words\",\r\n        animation: 150,\r\n        onEnd: function(evt){\r\n            statistics()\r\n        }\r\n    });\r\n\r\n    let sorttableMainList = Sortable.create(byId('mainDarpList'), {\r\n        group: \"mainDarpList\",\r\n        animation: 150\r\n    });\r\n\r\n    let drapListElement = $('.drapList')\r\n    let drapListElementLen=  $('.drapList').length\r\n    let drapStatus = false\r\n\r\n    let setDraplist = function(drap, len) {\r\n        while (len--){\r\n            let sorttablelist = Sortable.create(drap[len], {\r\n                group: \"words\",\r\n                animation: 150,\r\n                onEnd: function(evt){\r\n                    statistics()\r\n                }\r\n            });\r\n\r\n\r\n            sorttablelist.option('disabled', drapStatus)\r\n            console.log(sorttablelist)\r\n\r\n        }\r\n    }\r\n\r\n    setDraplist(drapListElement, drapListElementLen)\r\n\r\n    let UpdetaElementDrapList = function(){\r\n        drapListElement = $('.drapList')\r\n        drapListElementLen =  $('.drapList').length\r\n        setDraplist(drapListElement, drapListElementLen)\r\n    }\r\n\r\n\r\n    /**\r\n     * 统计行数\r\n     * @constructor\r\n     */\r\n    let statistics = function () {\r\n        $('.drapList').each(function () {\r\n            let element = $(this).children()\r\n            let len = element.length\r\n            if(len > 3 ){\r\n                toggleDrapFullMessage('#drapFullMessage', '一行最多放置三个，请添加新列或者放置下一列！', 1000 )\r\n                $('#drapSumList').append(element.last())\r\n                return false\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 显示提示新信息\r\n     * @param obj\r\n     * @param val\r\n     * @param time\r\n     */\r\n    let toggleDrapFullMessage = function (obj, val, time) {\r\n        $(obj).text(val).fadeIn(function () {\r\n            setTimeout(function () {\r\n                $(obj).fadeOut()\r\n            }, time)\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 输出所有 drapList 列表的值\r\n     * @param el\r\n     * @returns {Array}\r\n     */\r\n    let sortingListSum = function (el) {\r\n        let arr = []\r\n        $(el).each(function () {\r\n            arr.push($(this).text())\r\n        })\r\n        return arr\r\n    }\r\n\r\n    /**\r\n     * 获取自定义的数组，返回一个结果数组\r\n     * @param el\r\n     * @returns {Array}\r\n     */\r\n    let mainDrapListInputVal = function (el) {\r\n        let arr = []\r\n        $(el).each(function () {\r\n            if($(this).find('.mainDrapListInputCheck').is(':checked')){\r\n                arr.push($(this).find('.mainDrapListInputVal').val())\r\n            }\r\n        })\r\n        return arr\r\n    }\r\n\r\n\r\n    /**\r\n     * 删除一个元素 插入到原始列表\r\n     */\r\n    $('.close').each(function () {\r\n        $(this).click(function (e) {\r\n            $('#drapSumList').append($(this).parent())\r\n            e.stopPropagation()\r\n        })\r\n    })\r\n\r\n    /**\r\n     * 测试结果\r\n     */\r\n    $('#test').click(function () {\r\n\r\n        let elHeader = $('#header .drapContainer .drapList li span')\r\n        let elFooter = $('#footer .drapContainer .drapList li span')\r\n\r\n        let elMainInputval = $('#mainDarpList li')\r\n\r\n\r\n        /**\r\n         * 返回结果\r\n         */\r\n        console.log(\r\n            sortingListSum(elHeader),\r\n            sortingListSum(elFooter),\r\n            mainDrapListInputVal(elMainInputval)\r\n        )\r\n\r\n    })\r\n\r\n    $('#toggle').on('click', function () {\r\n        let stateMainList = sorttableMainList.option('disabled')\r\n        sorttableMainList.option('disabled', !stateMainList)\r\n\r\n        let stateSumList = sorttablesSumList.option('disabled')\r\n        sorttablesSumList.option('disabled', !stateSumList)\r\n        drapStatus= !drapStatus\r\n        console.log(drapStatus)\r\n        \r\n        UpdetaElementDrapList()\r\n    })\r\n\r\n})();\r\n\r\n\r\n\r\n"]}